<html>
  <div id="loading">Loading...</div>
  <script src="lunr.js"></script>
  <script src="alldocs.js"></script>
  <script>
  var index = lunr(function () {
    this.field('title', {boost: 10})
    this.field('text')
    this.ref('url')
  })
  alldocs.forEach(function(d){index.add(d);});
</script>
<input type="text" size="30" id="in" onchange="go();"/>
<pre id="out"></pre>
<script>
  var o = document.querySelector("#out");
  var l = document.querySelector("#loading");
  l.parentNode.removeChild(l);
  function go(){
    o.innerHTML = "Searching...";
    var q = document.querySelector("#in").value;
    var r = index.search(q);
    o.innerHTML = JSON.stringify(r, null, 2);
  };
</script>
</html>
